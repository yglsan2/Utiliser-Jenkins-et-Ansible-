Voici un exemple concret de dÃ©ploiement dâ€™un projet en Java, HTML, CSS et JavaScript via Ansible et Jenkins.
7ï¸âƒ£ DÃ©ploiement d'une application Java/HTML/CSS/JS avec Jenkins et Ansible ğŸš€
ğŸ“Œ Ã‰tape 1 : Structure du projet

Imaginons que ton projet soit organisÃ© ainsi :

/mon-projet
â”‚â”€â”€ src/
â”‚   â”œâ”€â”€ Main.java
â”‚   â”œâ”€â”€ ...
â”‚â”€â”€ web/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ styles.css
â”‚   â”œâ”€â”€ script.js
â”‚â”€â”€ build.gradle  (ou pom.xml si Maven)
â”‚â”€â”€ Jenkinsfile
â”‚â”€â”€ deploy.yml (Playbook Ansible)

L'objectif est :

    Compiler l'application Java (si applicable).

    Copier les fichiers HTML/CSS/JS sur le serveur distant.

    DÃ©marrer ou redÃ©marrer le serveur web (Tomcat, Apache, Nginxâ€¦).

ğŸ“Œ Ã‰tape 2 : Configurer Jenkins pour builder le projet Java

Dans Jenkins, crÃ©e un nouveau pipeline et ajoute ce Jenkinsfile :

pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                git 'https://github.com/ton-projet.git'
            }
        }

        stage('Build') {
            steps {
                sh './gradlew build' // ou 'mvn package' si Maven
            }
        }

        stage('Test') {
            steps {
                sh './gradlew test' // ou 'mvn test' si Maven
            }
        }

        stage('Deploy with Ansible') {
            steps {
                sh 'ansible-playbook -i /etc/ansible/hosts deploy.yml'
            }
        }
    }
}

ğŸ“Œ Ã‰tape 3 : CrÃ©er le Playbook Ansible pour dÃ©ployer le projet

CrÃ©e un fichier deploy.yml :

---
- name: DÃ©ploiement de l'application Java + Web
  hosts: webservers
  become: yes

  tasks:
    - name: Copier les fichiers de l'application
      copy:
        src: /var/lib/jenkins/workspace/mon-projet/web/
        dest: /var/www/html/
    
    - name: Copier l'application Java compilÃ©e
      copy:
        src: /var/lib/jenkins/workspace/mon-projet/build/libs/app.jar
        dest: /opt/myapp/app.jar
    
    - name: RedÃ©marrer le serveur web
      systemd:
        name: apache2
        state: restarted
    
    - name: DÃ©marrer l'application Java
      shell: "nohup java -jar /opt/myapp/app.jar > /opt/myapp/app.log 2>&1 &"

ğŸ“Œ Ã‰tape 4 : Ajouter le serveur cible dans Ansible

Dans /etc/ansible/hosts :

[webservers]
192.168.1.100 ansible_user=user ansible_ssh_private_key_file=/home/user/.ssh/id_rsa

ğŸ“Œ Ã‰tape 5 : Tester et dÃ©ployer ğŸš€

    Lance le job dans Jenkins.

    VÃ©rifie que le site est accessible sur http://192.168.1.100/.

    VÃ©rifie que l'application Java tourne :

ps aux | grep java

Si tout fonctionne, ton application est maintenant dÃ©ployÃ©e automatiquement ğŸ‰ 
